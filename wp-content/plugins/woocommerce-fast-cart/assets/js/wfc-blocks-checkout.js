(()=>{"use strict";const t=window.wc.wcBlocksData,e=window.wp.data;function s(t,e,s="long"){const n=[];for(let o of e)t[o]&&n.push(t[o][s]);return n.length>0&&n.join(" ")}!function(){const s=(0,e.select)(t.CART_STORE_KEY),n=s.getCustomerData();let o=n.billingAddress.country,c=n.shippingAddress.country;(0,e.subscribe)((t=>{const e=s.getCustomerData();e.billingAddress.country!==o&&(o=e.billingAddress.country,window.FastCart.debug("billing_country_changed",o),document.dispatchEvent(new CustomEvent("wc-fast-cart|block_country_changed",{detail:{addressStore:"#billing-fields",country:o}}))),e.shippingAddress.country!==c&&(c=e.shippingAddress.country,window.FastCart.debug("shipping_country_changed",c),document.dispatchEvent(new CustomEvent("wc-fast-cart|block_country_changed",{detail:{addressStore:"#shipping-fields",country:c}})))}),t.CART_STORE_KEY)}(),document.addEventListener("change",(t=>{const e=t.target;e.closest("#billing-country","#shipping-country")&&window.FastCart.debug("country_changed",e)})),document.addEventListener("wc-fast-cart|autocomplete_installed",(s=>{const n=(0,e.select)(t.CART_STORE_KEY).getCustomerData(),o=n.billingAddress.country,c=n.shippingAddress.country;document.dispatchEvent(new CustomEvent("wc-fast-cart|block_country_changed",{detail:{addressStore:"#billing-fields",country:o}})),document.dispatchEvent(new CustomEvent("wc-fast-cart|block_country_changed",{detail:{addressStore:"#shipping-fields",country:c}}))})),document.addEventListener("wc-fast-cart|update_checkout_values",(n=>{const{place:o,addressParent:c}=n.detail;window.FastCart.debug("update_checkout_values",o,c),function(n,o){const c=(0,e.select)(t.CART_STORE_KEY).getCustomerData(),d={};n.address_components.forEach((t=>{t.types.forEach((e=>{d[e]={long:t.long_name,short:t.short_name}}))})),window.FastCart.debug("gplaces_data_retrieved",d);const a={};a[o]=c[o],a[o].address_1=s(d,["street_number","route"])||"",a[o].city=s(d,["locality","postal_town"])||c[o].city,a[o].state=s(d,["administrative_area_level_1"],"short")||c[o].state,a[o].postcode=s(d,["postal_code"])||c[o].postcode,d.postal_code_suffix&&(a[o].postcode+="-"+d.postal_code_suffix.long),d.street_number,window.FastCart.debug("new_customer_data",a),(0,e.dispatch)(t.CART_STORE_KEY).updateCustomerData(a)}(o,c.id.includes("billing")?"billingAddress":"shippingAddress")}))})();